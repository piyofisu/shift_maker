<%= render "common/header" %>
<div class = "staff-related">

  <%# 登録済スタッフ一覧・左サイドバー %>
  <div class = "staff-lists">
    <h2>スタッフ一覧</h2>
    <div class = "staff-heading">
      <div class = "staff-heading-name">名前</div>
      <div class = "staff-heading-sex">性別</div>
    </div>
    <% if @staffs.empty? %>
      <p>スタッフが登録されていません</p>
    <% else %>
      <div class = "staff-table">
        <ul class = "staff-list">
          <% @staffs.each_with_index do |staff, index| %>
          <li class="staff-row" id="staff-row-<%= index %>">
            <%= link_to edit_staff_path(staff.id) do %>
            <div class = "staff-info">
              <div class="staff-name"><%= staff.name %></div>
              <div class="staff-status"><%= staff.sex.name %></div>
            </div>
            <% end %>
          </li>
          <% end %>
        </ul>
      </div>
    <% end %>
  </div>
  
  <%# スタッフ登録 %>
  <div class = "staff-registration">
    <h2>スタッフ登録</h2>
    <%= form_with model: @staff, local: true do |f| %>

      <%# エラーメッセージ %>
      <% if f.object.errors.any? %>
      <div>
        <ul>
          <% f.object.errors.full_messages.each do |message| %>
          <li><%= message %></li>
          <% end %>
        </ul>
      </div>
      <% end %>

      <%# スタッフ名 %>
      <div>名前</div>
      <%= f.text_area :name, placeholder:"スタッフ名" %>

      <%# 性別 %>
      <div>性別</div>
      <%= f.collection_select(:sex_id, Sex.all, :id, :name, {}) %>

      <%= f.submit '登録する' %>
      <%=link_to 'もどる', root_path %>
    <% end %>
  </div>
</div>